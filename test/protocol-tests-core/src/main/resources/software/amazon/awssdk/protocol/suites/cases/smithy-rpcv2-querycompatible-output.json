[
  {
    "description": "Parses simple RpcV2 CBOR errors with no query error code",
    "given": {
      "response": {
        "status_code": 400,
        "headers": {
          "smithy-protocol": "rpc-v2-cbor",
          "Content-Type": "application/cbor"
        },
        "body": "uQACZl9fdHlwZXgtYXdzLnByb3RvY29sdGVzdHMucnBjdjJjYm9yI05vQ3VzdG9tQ29kZUVycm9yZ01lc3NhZ2ViSGk="
      }
    },
    "when": {
      "action": "unmarshall",
      "operation": "QueryCompatibleOperation"
    },
    "then": {
      "errorDeserializedAs": {
        "errorCode": "NoCustomCodeError",
        "error": {
          "message": "Hi"
        }
      }
    }
  },
  {
    "description": "Parses simple RpcV2 CBOR errors with query error code",
    "given": {
      "response": {
        "status_code": 400,
        "headers": {
          "x-amzn-query-error": "Customized;Sender",
          "smithy-protocol": "rpc-v2-cbor",
          "Content-Type": "application/cbor"
        },
        "body": "uQACZl9fdHlwZXgrYXdzLnByb3RvY29sdGVzdHMucnBjdjJjYm9yI0N1c3RvbUNvZGVFcnJvcmdNZXNzYWdlYkhp"
      }
    },
    "when": {
      "action": "unmarshall",
      "operation": "QueryCompatibleOperation"
    },
    "then": {
      "errorDeserializedAs": {
        "errorCode": "Customized",
        "error": {
          "message": "Hi"
        }
      }
    }
  }
]
