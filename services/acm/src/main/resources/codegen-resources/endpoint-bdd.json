{
  "version": "1.1",
  "parameters": {
    "Region": {
      "builtIn": "AWS::Region",
      "required": false,
      "documentation": "The AWS region used to dispatch the request.",
      "type": "string"
    },
    "UseDualStack": {
      "builtIn": "AWS::UseDualStack",
      "required": true,
      "default": false,
      "documentation": "When true, use the dual-stack endpoint. If the configured endpoint does not support dual-stack, dispatching the request MAY return an error.",
      "type": "boolean"
    },
    "UseFIPS": {
      "builtIn": "AWS::UseFIPS",
      "required": true,
      "default": false,
      "documentation": "When true, send this request to the FIPS-compliant regional endpoint. If the configured endpoint does not have a FIPS compliant endpoint, dispatching the request will return an error.",
      "type": "boolean"
    },
    "Endpoint": {
      "builtIn": "SDK::Endpoint",
      "required": false,
      "documentation": "Override the endpoint used to send this request",
      "type": "string"
    }
  },
  "conditions": [
    {
      "fn": "isSet",
      "argv": [
        {
          "ref": "Endpoint"
        }
      ]
    },
    {
      "fn": "isSet",
      "argv": [
        {
          "ref": "Region"
        }
      ]
    },
    {
      "fn": "booleanEquals",
      "argv": [
        {
          "ref": "UseFIPS"
        },
        true
      ]
    },
    {
      "fn": "aws.partition",
      "argv": [
        {
          "ref": "Region"
        }
      ],
      "assign": "PartitionResult"
    },
    {
      "fn": "booleanEquals",
      "argv": [
        {
          "ref": "UseDualStack"
        },
        true
      ]
    },
    {
      "fn": "booleanEquals",
      "argv": [
        {
          "fn": "getAttr",
          "argv": [
            {
              "ref": "PartitionResult"
            },
            "supportsFIPS"
          ]
        },
        true
      ]
    },
    {
      "fn": "booleanEquals",
      "argv": [
        {
          "fn": "getAttr",
          "argv": [
            {
              "ref": "PartitionResult"
            },
            "supportsDualStack"
          ]
        },
        true
      ]
    },
    {
      "fn": "stringEquals",
      "argv": [
        "aws-us-gov",
        {
          "fn": "getAttr",
          "argv": [
            {
              "ref": "PartitionResult"
            },
            "name"
          ]
        }
      ]
    }
  ],
  "results": [
    {
      "conditions": [],
      "error": "Invalid Configuration: FIPS and custom endpoint are not supported",
      "type": "error"
    },
    {
      "conditions": [],
      "error": "Invalid Configuration: Dualstack and custom endpoint are not supported",
      "type": "error"
    },
    {
      "conditions": [],
      "endpoint": {
        "url": {
          "ref": "Endpoint"
        },
        "properties": {},
        "headers": {}
      },
      "type": "endpoint"
    },
    {
      "conditions": [],
      "endpoint": {
        "url": "https://acm-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",
        "properties": {},
        "headers": {}
      },
      "type": "endpoint"
    },
    {
      "conditions": [],
      "error": "FIPS and DualStack are enabled, but this partition does not support one or both",
      "type": "error"
    },
    {
      "conditions": [],
      "endpoint": {
        "url": "https://acm.{Region}.amazonaws.com",
        "properties": {},
        "headers": {}
      },
      "type": "endpoint"
    },
    {
      "conditions": [],
      "endpoint": {
        "url": "https://acm-fips.{Region}.{PartitionResult#dnsSuffix}",
        "properties": {},
        "headers": {}
      },
      "type": "endpoint"
    },
    {
      "conditions": [],
      "error": "FIPS is enabled but this partition does not support FIPS",
      "type": "error"
    },
    {
      "conditions": [],
      "endpoint": {
        "url": "https://acm.{Region}.{PartitionResult#dualStackDnsSuffix}",
        "properties": {},
        "headers": {}
      },
      "type": "endpoint"
    },
    {
      "conditions": [],
      "error": "DualStack is enabled but this partition does not support DualStack",
      "type": "error"
    },
    {
      "conditions": [],
      "endpoint": {
        "url": "https://acm.{Region}.{PartitionResult#dnsSuffix}",
        "properties": {},
        "headers": {}
      },
      "type": "endpoint"
    },
    {
      "conditions": [],
      "error": "Invalid Configuration: Missing Region",
      "type": "error"
    }
  ],
  "root": 15,
  "nodeCount": 15,
  "nodes": "/////wAAAAH/////AAAABAX14QIF9eEDAAAAAgX14QEAAAACAAAABgX14QQF9eEFAAAABQAAAAQF9eEFAAAABwX14QYF9eEHAAAABQAAAAYF9eEIAAAABAAAAAUAAAAHAAAAAwAAAAgF9eEMAAAABgX14QkF9eEKAAAABAAAAAoF9eELAAAAAwAAAAsF9eEMAAAAAgAAAAkAAAAMAAAAAQAAAA0F9eEMAAAAAAAAAAMAAAAO"
}