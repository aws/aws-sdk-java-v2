/*
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License").
 * You may not use this file except in compliance with the License.
 * A copy of the License is located at
 *
 *  http://aws.amazon.com/apache2.0
 *
 * or in the "license" file accompanying this file. This file is distributed
 * on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */

package software.amazon.awssdk.enhanced.dynamodb.functionaltests.models;

import java.time.Instant;
import software.amazon.awssdk.enhanced.dynamodb.converters.EpochMillisFormatTestConverter;
import software.amazon.awssdk.enhanced.dynamodb.converters.TimeFormatUpdateTestConverter;
import software.amazon.awssdk.enhanced.dynamodb.extensions.annotations.DynamoDbAutoGeneratedTimestampAttribute;
import software.amazon.awssdk.enhanced.dynamodb.extensions.annotations.DynamoDbVersionAttribute;
import software.amazon.awssdk.enhanced.dynamodb.mapper.annotations.DynamoDbAttribute;
import software.amazon.awssdk.enhanced.dynamodb.mapper.annotations.DynamoDbBean;
import software.amazon.awssdk.enhanced.dynamodb.mapper.annotations.DynamoDbConvertedBy;
import software.amazon.awssdk.enhanced.dynamodb.mapper.annotations.DynamoDbPartitionKey;
import software.amazon.awssdk.enhanced.dynamodb.mapper.annotations.DynamoDbUpdateBehavior;

import static software.amazon.awssdk.enhanced.dynamodb.mapper.UpdateBehavior.WRITE_IF_NOT_EXISTS;

@DynamoDbBean
public class RecordWithUpdateBehaviors {
    private String id;
    private Instant createdOn;
    private Instant lastUpdatedOn;
    private Instant createdAutoUpdateOn;
    private Instant lastAutoUpdatedOn;
    private Long version;
    private Instant lastAutoUpdatedOnMillis;
    private Instant formattedLastAutoUpdatedOn;
    private NestedRecordWithUpdateBehavior nestedRecord;

    @DynamoDbPartitionKey
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    @DynamoDbUpdateBehavior(WRITE_IF_NOT_EXISTS)
    @DynamoDbAttribute("created-on")                           // Forces a test on attribute name cleaning
    public Instant getCreatedOn() {
        return createdOn;
    }

    public void setCreatedOn(Instant createdOn) {
        this.createdOn = createdOn;
    }

    public Instant getLastUpdatedOn() {
        return lastUpdatedOn;
    }

    public void setLastUpdatedOn(Instant lastUpdatedOn) {
        this.lastUpdatedOn = lastUpdatedOn;
    }


    @DynamoDbUpdateBehavior(WRITE_IF_NOT_EXISTS)
    @DynamoDbAutoGeneratedTimestampAttribute
    public Instant getCreatedAutoUpdateOn() {
        return createdAutoUpdateOn;
    }

    public void setCreatedAutoUpdateOn(Instant createdAutoUpdateOn) {
        this.createdAutoUpdateOn = createdAutoUpdateOn;
    }

    @DynamoDbAutoGeneratedTimestampAttribute
    public Instant getLastAutoUpdatedOn() {
        return lastAutoUpdatedOn;
    }

    public void setLastAutoUpdatedOn(Instant lastAutoUpdatedOn) {
        this.lastAutoUpdatedOn = lastAutoUpdatedOn;
    }

    @DynamoDbVersionAttribute
    public Long getVersion() {
        return version;
    }

    public void setVersion(Long version) {
        this.version = version;
    }

    @DynamoDbConvertedBy(EpochMillisFormatTestConverter.class)
    @DynamoDbAutoGeneratedTimestampAttribute
    public Instant getLastAutoUpdatedOnMillis() {
        return lastAutoUpdatedOnMillis;
    }

    public void setLastAutoUpdatedOnMillis(Instant lastAutoUpdatedOnMillis) {
        this.lastAutoUpdatedOnMillis = lastAutoUpdatedOnMillis;
    }

    @DynamoDbConvertedBy(TimeFormatUpdateTestConverter.class)
    @DynamoDbAutoGeneratedTimestampAttribute
    public Instant getFormattedLastAutoUpdatedOn() {
        return formattedLastAutoUpdatedOn;
    }

    public void setFormattedLastAutoUpdatedOn(Instant formattedLastAutoUpdatedOn) {
        this.formattedLastAutoUpdatedOn = formattedLastAutoUpdatedOn;
    }

    public NestedRecordWithUpdateBehavior getNestedRecord() {
        return nestedRecord;
    }

    public void setNestedRecord(NestedRecordWithUpdateBehavior nestedRecord) {
        this.nestedRecord = nestedRecord;
    }
}
